# /* vim: set filetype=sh : */


case "$(uname -s)" in
    Darwin*)
        if ! xcode-select --version 2>/dev/null; then
            xcode-select --install
        fi
        if ! command -v brew &> /dev/null; then
            /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
        fi
        if ! command -v ansible &> /dev/null; then
            brew install ansible
        fi
        ;;
    *)
        pip3 install ansible
        ;;
esac

ansible-galaxy install -r requirements.yml
ansible-playbook ansible/playbook.yml
